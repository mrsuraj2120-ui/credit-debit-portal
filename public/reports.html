<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Reports - Credit/Debit Portal</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-100 text-gray-800">
  <div class="flex">
    <!-- Sidebar -->
    <aside class="w-64 h-screen bg-gray-900 text-white flex flex-col p-4 space-y-6 sticky top-0">
      <h2 class="text-xl font-bold mb-4 flex items-center space-x-2">
        <span>ğŸ“ˆ</span><span>Reports</span>
      </h2>
      <nav class="flex flex-col space-y-3">
        <a href="index.html" class="hover:bg-gray-700 p-2 rounded">ğŸ  Dashboard</a>
        <a href="companies.html" class="hover:bg-gray-700 p-2 rounded">ğŸ¢ Companies</a>
        <a href="vendors.html" class="hover:bg-gray-700 p-2 rounded">ğŸ¤ Vendors</a>
        <a href="transactions.html" class="hover:bg-gray-700 p-2 rounded">ğŸ“„ Transactions</a>
        <a href="items.html" class="hover:bg-gray-700 p-2 rounded">ğŸ“¦ Items</a>
        <a href="users.html" class="hover:bg-gray-700 p-2 rounded">ğŸ‘¤ Users</a>
        <a href="reports.html" class="hover:bg-gray-700 p-2 rounded bg-gray-700">ğŸ“ˆ Reports</a>
        <a href="settings.html" class="hover:bg-gray-700 p-2 rounded">âš™ï¸ Settings</a>
      </nav>
      <div class="mt-auto bg-gray-800 p-3 rounded-lg text-sm">
        <p class="text-xs opacity-70">Role: <span id="adminRole"></span></p>
        <button onclick="logout()" class="mt-2 bg-red-600 px-3 py-1 rounded text-xs">Logout</button>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 p-8 overflow-y-auto">
      <div class="flex justify-between items-center mb-6">
        <h1 class="text-2xl font-bold">Reports Dashboard</h1>
        <div class="flex gap-3">
          <select class="border p-2 rounded">
            <option>Last 7 Days</option>
            <option>This Month</option>
            <option>Last Month</option>
            <option>This Year</option>
          </select>
          <button class="bg-blue-600 text-white px-4 py-2 rounded">Generate</button>
        </div>
      </div>

      <!-- Summary Cards -->
      <div class="grid grid-cols-4 gap-6 mb-8">
        <div class="bg-white p-5 rounded-xl shadow text-center">
          <h3 class="text-gray-500 text-sm">Total Credit Notes</h3>
          <p class="text-3xl font-bold text-blue-600" id="creditCount">0</p>
        </div>
        <div class="bg-white p-5 rounded-xl shadow text-center">
          <h3 class="text-gray-500 text-sm">Total Debit Notes</h3>
          <p class="text-3xl font-bold text-orange-600" id="debitCount">0</p>
        </div>
        <div class="bg-white p-5 rounded-xl shadow text-center">
          <h3 class="text-gray-500 text-sm">Net Balance</h3>
          <p class="text-3xl font-bold text-green-600" id="netBalance">â‚¹0</p>
        </div>
        <div class="bg-white p-5 rounded-xl shadow text-center">
          <h3 class="text-gray-500 text-sm">Vendors Active</h3>
          <p class="text-3xl font-bold text-purple-600" id="vendorsActive">0</p>
        </div>
      </div>

      <!-- Charts -->
      <div class="grid grid-cols-2 gap-6 mb-8">
        <div class="bg-white p-6 rounded-xl shadow">
          <h3 class="text-lg font-semibold mb-4">Monthly Credit vs Debit</h3>
          <canvas id="creditDebitChart" height="200"></canvas>
        </div>
        <div class="bg-white p-6 rounded-xl shadow">
          <h3 class="text-lg font-semibold mb-4">Top 5 Vendors</h3>
          <canvas id="topVendorsChart" height="200"></canvas>
        </div>
      </div>

      <!-- Table -->
      <div class="bg-white p-6 rounded-xl shadow mb-8">
        <h3 class="text-lg font-semibold mb-4">Detailed Transaction Report</h3>
        <table class="w-full text-sm">
          <thead class="bg-gray-100">
            <tr>
              <th class="p-2 text-left">Date</th>
              <th class="p-2 text-left">Type</th>
              <th class="p-2 text-left">Vendor</th>
              <th class="p-2 text-left">Company</th>
              <th class="p-2 text-left">Amount</th>
            </tr>
          </thead>
          <tbody id="reportTable"></tbody>
        </table>
      </div>
    </main>
  </div>

  <script src="js/rolecheck.js"></script>
  <script>
    function logout(){window.location.href='login.html';}

    document.addEventListener('DOMContentLoaded', async () => {
      // Demo static data (replace with API later)
      const ctx1 = document.getElementById('creditDebitChart');
      new Chart(ctx1, {
        type: 'bar',
        data: {
          labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
          datasets: [
            { label: 'Credit', data: [12000, 19000, 3000, 5000, 2000, 30000], backgroundColor: '#2563EB' },
            { label: 'Debit', data: [10000, 15000, 8000, 12000, 9000, 20000], backgroundColor: '#F59E0B' }
          ]
        },
        options: { responsive: true, plugins: { legend: { position: 'bottom' } } }
      });

      const ctx2 = document.getElementById('topVendorsChart');
      new Chart(ctx2, {
        type: 'doughnut',
        data: {
          labels: ['Vendor A', 'Vendor B', 'Vendor C', 'Vendor D', 'Vendor E'],
          datasets: [{
            data: [30000, 25000, 20000, 15000, 10000],
            backgroundColor: ['#2563EB', '#F59E0B', '#10B981', '#EF4444', '#8B5CF6']
          }]
        },
        options: { cutout: '70%', plugins: { legend: { position: 'bottom' } } }
      });
    });
  </script>
</body>
</html>
